version: "3"

services:
  # database:
  #   container_name: ridi_kcp_api_db
  #   image: mariadb
  #   environment:
  #     MYSQL_DATABASE: "${APP_DATABASE_NAME}"
  #     MYSQL_USER: "${APP_DATABASE_USER}"
  #     MYSQL_PASSWORD: "${APP_DATABASE_PASSWORD}"
  #     MYSQL_ALLOW_EMPTY_PASSWORD: "yes"
  #   command: --character-set-server=utf8 --collation-server=utf8_unicode_ci
  #   ports:
  #     - 3306:3306
  database:
    container_name: ridi_kcp_api_db
    image: amazon/dynamodb-local
    ports:
      - 8000:8000
    volumes:
      - dynamodata:/home/dynamodblocal
    working_dir: /home/dynamodblocal
    command: ["-jar", "DynamoDBLocal.jar", "-sharedDb", "-dbPath", "."]

  web:
    container_name: ridi_kcp_api
    image: node:lts
    volumes:
      - ./:/app
    working_dir: /app    
    ports:
      - 3000:3000
    command: npm run dev
    links:
      - database